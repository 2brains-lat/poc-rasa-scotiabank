version: "3.1"

intents:
  - saludo
  - despedida
  - pregunta_servicio
  - bloquear_tarjeta
  - pregunta_uf
  - pregunta_hora


responses:
  utter_saludo:
    - text: "Â¡Hola! Â¿En quÃ© puedo ayudarte?"
  utter_despedida:
    - text: "Hasta luego ðŸ‘‹"
  utter_info_servicio:
    - text: "Ofrecemos soporte tÃ©cnico, ventas y consultas generales."
  utter_ask_rut:
    - text: "Por favor, ingresa tu RUT (formato 12.345.678-9):"
  utter_ask_password:
    - text: "Ingresa tu contraseÃ±a (4 dÃ­gitos):"
  utter_ask_tarjeta:
    - text: "Â¿CuÃ¡l de estas tarjetas deseas bloquear? Ingresa el nÃºmero exacto."
  utter_invalid_rut:
    - text: "El RUT ingresado no es vÃ¡lido. Intenta nuevamente."
  utter_invalid_password:
    - text: "La contraseÃ±a debe tener exactamente 4 dÃ­gitos."
  utter_invalid_card_selection:
    - text: "No reconocÃ­ esa tarjeta. Por favor, elige una de la lista mostrada."

slots:
  rut:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: autenticacion_form
        not_intent: bloquear_tarjeta

  password:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: autenticacion_form
        not_intent: bloquear_tarjeta


  tarjeta:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text

  tarjetas_disponibles:
    type: list
    influence_conversation: false
    mappings:
      - type: from_text

forms:
  autenticacion_form:
    required_slots:
      - rut
      - password

  seleccionar_tarjeta_form:
    required_slots:
      - tarjeta

actions:
  - action_dar_hora
  - action_consultar_uf
  - validate_autenticacion_form
  - validate_seleccionar_tarjeta_form
  - action_mostrar_tarjetas
  - action_procesar_bloqueo
  - action_reset_bloqueo_slots
